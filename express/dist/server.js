(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var o in n)e.o(n,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r);const n=require("express");var o=e.n(n);const t=require("cors");var s=e.n(t);const c=require("morgan");var i=e.n(c);const p=require("apollo-server-express"),a=p.gql`
  type Image {
    name: String!
  }

  type Query {
    getImages(page: Int!): [Image]
  }
`,u=require("fs");(0,require("dotenv").config)({path:"./.env"}),process.env.POSTGRES_HOST,process.env.POSTGRES_USER,process.env.POSTGRES_PORT,process.env.POSTGRES_PASSWORD,process.env.POSTGRES_DB,process.env.DATABASE_URL_DEVELOPMENT,process.env.DATABASE_URL_PRODUCTION,process.env.DATABASE_URL_TEST,process.env.WIDESCREEN_WALLPAPERS,process.env.WALLPAPER_PLAY,process.env.WALLHAVEN,process.env.ALPHA_CODERS,process.env.DEV_URL,process.env.PROD_URL;const l=process.env.IMAGES_DIR,v=(process.env.MOVIES_DIR,process.env.TV_DIR,process.env.MUSIC_DIR,process.env.TMDB_API_KEY,process.env.HTTP_PORT);function f(e,r,n,o,t,s,c){try{var i=e[s](c),p=i.value}catch(e){return void n(e)}i.done?r(p):Promise.resolve(p).then(o,t)}var y;function P(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}process.env.API_GATEWAY;const S={Query:function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(r){P(e,r,n[r])}))}return e}({},{getImages:(y=function*(e,{page:r}){try{var n;return(yield u.promises.readdir(null!==(n=null==l?void 0:l.toString())&&void 0!==n?n:"")).slice(20*r-20,20*r)}catch(e){console.error(e)}},function(){var e=this,r=arguments;return new Promise((function(n,o){var t=y.apply(e,r);function s(e){f(t,n,o,s,c,"next",e)}function c(e){f(t,n,o,s,c,"throw",e)}s(void 0)}))})})};function _(e,r,n,o,t,s,c){try{var i=e[s](c),p=i.value}catch(e){return void n(e)}i.done?r(p):Promise.resolve(p).then(o,t)}function d(e){return function(){var r=this,n=arguments;return new Promise((function(o,t){var s=e.apply(r,n);function c(e){_(s,o,t,c,i,"next",e)}function i(e){_(s,o,t,c,i,"throw",e)}c(void 0)}))}}const O={origin:"*"};function g(){return(g=d((function*(){const e=o()(),r=new p.ApolloServer({typeDefs:a,resolvers:S});e.use(i()(":method :url :status :res[content-length] - :response-time ms")),e.use(s()(O)),yield r.start(),r.applyMiddleware({app:e,path:"/api/graphql"}),e.listen({port:v},(()=>console.log(`App is listening on Port ${v}`)))}))).apply(this,arguments)}try{!function(){g.apply(this,arguments)}()}catch(e){console.error(e)}var A=exports;for(var E in r)A[E]=r[E];r.__esModule&&Object.defineProperty(A,"__esModule",{value:!0})})();